#  컴퓨팅 및 네트워크 서비스
EC2 : 크기 조정 가능한 컴퓨팅 파워
- 컴퓨팅 리소스 완전 제어( 메모리등 마음대로 조정가능)
- 부팅 시간을 몇 분으로 단축
      일반적으로 데이터 센터 계약하고 입주하는데 적어도 2주이상 걸리게 됨.
      AWS EC2를 사용하면 몇 분만에 서버를 만들수 있음.
- 실제로 사용한 만큼 지불(기본적으로 1시간 단위)
- 1년, 3년 등 예약을 해서 사용하면 최대 70%정도의 비용으로 사용할수 있음.
- Linux, Windows 사용 가능
- 안전성을 위해서 여러 AWS 리전과 가용영역에 걸쳐 배포.

~~~
사용법
1. AWS 리전을 정함
2. 이미 구성된 AMI(아마존 머신 이미지)에서 EC2 인스턴스를 시작 (따로 OS등을 설치할 필요가 없음)
3. CPU, 메모리, 스토리지, 네트워크 요구사항에 따라 인스턴스 유형 선택.
4. 네트워크, IP주소, 보안그룹등을 구성
5. 런치 버튼 클릭시 완료.

언어등을 이용해서 스크립트를 짜놓으면 쉽게 서버를 만들수가 있다.
~~~

awsmarketplace
- 직접 db등을 설치 할수 있지만 파트너사에서 제공하는것을 marketplace를 이용해서 설치할수도 있다.

----- 인텔 이야기 시작
인텔이랑 친해서 CPU도 만들어줌.
서버 : HasWell마이크로 아키텍처 사용.(기존 애플리ㅔ이션 성능 30%이상 높일수 있음)
P상태 및 C상태 : 각 코어 성능과 절전 상태를 개별적으로 튜닝 가능
인텔의 AWS에 최적화된 프로세스 제공으로 좋다 이런애기임.
----- 인텔 이야기 끝

T2인스턴스
- 사용하지 않을떄 credit이 적립됨. 하루동안 적립된 포인트로 퍼포먼스를 높일수 있음.
- 저렴하게 서버를 운영하고 싶을때 사용.

EC2 구입옵션
- 온디맨드 : 시간당 요금 청구(1시간당)
- 예약 인스턴스 : 1년, 3년, 또는 미리 선결제하게 되면 최대 70%까지 할인 받을수 있음
- 스팟 인스턴스 : 미사용 EC2용량을 경매 방식으로 구매하는 방법.

EC2 인스턴스 : 기본적으로 네트워크에 연결이 되어야 함.
             VPC 네트워크에 연결 (?? VPC를 통해 DB등에 연결)

AMI(가상 머신 구성) -> 인스턴스
![img](http://image.slidesharecdn.com/20140718awsomedays-main-milan-final-140728050903-phpapp02/95/awsome-day-milan-july-24th-2014-85-638.jpg?cb=1406540527)

    EC2는 다른 가용영역으로 옮길수가 없습니다.
    인스턴스도 백업 이미지를 만들수 있음.

    S3를 이용하면 다른 서버에 인스턴스를 카피할수 있다.
    S3같은경우는 가용영역안에 있지 않기 때문에 옮기는게 가능.

EC2설치시 putty 사용할 경우 puttyGen을 받아서 key도 받아야함.

auto scaling  
- EC2 용량을 자동으로 조정
- 사용량의 변화가 많은 애플리케이션에 매우 적합.
- 추가 요금 없이 사용.

CloudWatch  
- 메모리, CPU사용량등을 확인.

~~~
  autoScaling는 CPU사용량이 많아 지면 서버를 한다 늘려주고 load balancing에 서버를 하나 추가했다고 정보를 알려준다.
  그러면 load balancing는 트랙픽을 새로 생긴 서버로도 보내서 트래픽을 분산시켜준다.
~~~

Amazon VPC
- 고객이 정의한 가상 네트워크에서 AWS리소스를 시작할 수 있도록 AWS 클라우드상에 프라이빗하고 격리된 공간을 프로비저닝.
      가상 네트워크 환경을 완벽하게 제어할 수 있음.
      VPN을 이용하면 VPC와 데이터 센터를 안전하게 연결할수 있음.
      내가 필요한 만큼의 프라이빗 IP주소 범위를 지정.
      IP주소 범위를 여러 서브넷으로 분할.
      데이터베이스는 프라이빗 서브넷으로 연결.
      네트워크 엑세스 제어 목록을 사용해 서브넷에 대한 인바운드, 아웃바운드 엑세스를 제어.

      방화벽 : Security Group

      Amazon Elastic IP 주소를 VPC의 인스턴스에 연결하여 인터넷에서 직접 액세스 할수 있다.
      Elastic IP : 사용할때는 요금을 받지 않음.
      사용하지 않을떄는 요금 발생 (IP는 갯수에 제한이 있어서 사용하지 않는 IP는 반납을 위해서)
![img](https://s3-ap-northeast-1.amazonaws.com/sungho/awsvpnexample.png)

Direct Connect :
    - 고객 온프레미스 환경과 AWS간의 전용 네트워크 연결 구축
    - 네트워크 비용이 줄고, 더욱 일관된 네트워크 환경 제공
    - 모든 AWS서비스와 호환

Route 53
    - DNS 포트가 53번임 그래서 Route 53
    - 사람이 읽을수 있는 도메인 네임을 컴퓨터가 읽을수 있는 이름으로 바꿔주는거임.
    - 도메인 이름 등록 제공
    - AWS에서 도메인을 등록해서 사용할수도 있음 (비용등을 고려해서 외부에서 사서 등록할지 생각ㅎ면됨)
    - DNS는 라우팅이라는것을 해준다 (경로를 찾아가준다. )
    - 여러대의 서버를 하나의 이름으로 등록할수도 있음 (LBR 라우팅 기능 : 유저가 빨리 응답받을수 있는 서버에서 받을수 있도록 하는 기능)


Load Balancing
    - 여러 인스턴스에 걸쳐 트래픽 분산
    - 비정상 EC2 인스턴스를 탐지하기 위한 상태 확인 지원
    - HTTP, HTTPS, TCP트래픽의 라우팅과 로드 밸런싱 지원.
    -  리전 서비스 (여러개의 가용영역을 사용할수 있음)



# 데이터베이스 제품 및 서비스

RDS :
- 관계형 데이터베이스
- EC2 위에 RDS를 올릴때는 인프라를 생각 안해도됨.
- 아무런 관리의 부담이 없음.(Application 개발에만 집중하면됨)
- Amazon Aurora 는 mySql을 커스터마이징함 (가격 동일, 사용자가 많을 경우 훨씬 높은 성능을 보임)
- rdbms는 간편하게 설정, 운영 및 확정
- 한번이 API 호출을 통해 관계형 데이터베이스 인스턴스와 관련된 컴퓨팅 리소스 또는 스토리지 용량 확장
- 자동으로 데이터 베이스 소프트웨어 패치 및 데이터베이스 백업


DynamoDB
- 어떤 양의 데이터든 제한없이 저장 가능
- 간단한 데이터를 빠르게 처리하고 싶을 떄 사용.
- 테이블의 용량 제한이 없음.
- 완전한 무중단 상태로 용량을 늘릴수 있음.
- 빠르고 확장성이 높음.
- key, value형태의 검색 빠름
- range 쿼리 빠름.
- API가 굉장히 쉬움

전문인력이 있고 데이터베이스 직접 관리하고 싶다면 자체 관리가 가능한 관계형 데이터베이스 설치.

Amazon ElastiCache
- redis
- 원본 데이터 저장소의 부담을 덜어주겠다. 데이터베이스의 부담을 offload
- 관계형 데이터베이스로 실시간 대시보드를 구성하면 부하가 심함 이럴경우 일라스틱 캐쉬를 사용
- Memcached 호환 및 Redis 호환 온디맨드형 캐시 클러스트 ( 거의 소스 변경 없이 수정없이 사용가능)
- 위의 두가지 기능을 모두 가지고 잇음(Memcached, Redis)
- 읽기 부하를 분산시켜주는거임( 쓰기 금지)
- 메모리 DB임 (정말 속도가 빠름)
- 웹서버의 session 데이터 저장용으로 보통 쓰임.

* 오토 스케일링 사용할때 웹서버  session db로 엘라스틱 캐쉬 또는 다이나모 db를 사용.
(오토 스케일링은 session이 웹서버 외부에 저장되어 있어야 함)

RedShift
- 데이터 웨어하우스 클러스터
- 패타바이스 규모( 테라의 천배 크기)
- API는 포스트그래등과 동일한것을 사용
- 세로로 데이터를 저장 (컬럼 기반 스토리지 : 비즈니스 인텔리젠트 쿼리 : 컬럼으로 저장하면 속도가 빠르게 나오도록 구성되어 있음)
- 데이터 워어 하우스에 최적화 되어 있다. (IOㄹㄹ 획기적으로 줄여줄수 있다.)
- 주기적으로 웹으로 상태 체크
